<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Setup | PoornimaX</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #3b82f6; --primary-light: #60a5fa;
            --bg: #f8f9fa; --bg-card: #ffffff;
            --text: #1f2937; --text-light: #6c757d;
            --border: #e9ecef; --shadow: rgba(0, 0, 0, 0.08);
            --radius: 12px; --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Inter', sans-serif; }
        body { background-color: var(--bg); color: var(--text); display: grid; place-items: center; min-height: 100vh; }
        .container { text-align: center; padding: 30px 40px; border-radius: var(--radius); background: var(--bg-card); box-shadow: 0 8px 32px var(--shadow); border:1px solid var(--border); width:90%; max-width:600px; }
        h2 { font-size:2rem; margin-bottom:20px; background: linear-gradient(45deg, var(--primary), var(--primary-light)); -webkit-background-clip: text; color:transparent; font-weight:700; }
        .form-group { margin-bottom: 20px; text-align:left; }
        label { display:block; margin-bottom:5px; font-weight:600; }
        select, input[type=text], input[type=number] { width:100%; padding:12px; border-radius:8px; border:1px solid var(--border); outline:none; transition: var(--transition); }
        select:focus, input:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(59,130,246,0.2); }
        .checkbox-group { display: flex; flex-wrap: wrap; gap:10px; }
        .checkbox-group label { display:flex; align-items:center; gap:5px; }
        button { background: var(--primary); color:#fff; padding:12px 20px; border:none; border-radius:8px; cursor:pointer; font-weight:600; width:100%; transition: var(--transition); }
        button:hover { transform: translateY(-2px); box-shadow: 0 4px 20px rgba(59,130,246,0.25); }
        .messages { margin-bottom: 15px; }
        .messages p { margin-bottom:5px; padding:8px 10px; border-radius:6px; }
        .error { background:#fee2e2; color:#b91c1c; }
        .success { background:#d1fae5; color:#065f46; }
        .info { background:#e0f2fe; color:#0369a1; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Profile Setup</h2>

        <div class="messages">
            {% for message in messages %}
                <p class="{% if message.tags %}{{ message.tags }}{% endif %}">{{ message }}</p>
            {% endfor %}
        </div>

        <form method="POST">
            {% csrf_token %}

            <!-- Personality -->
            <div class="form-group">
                <label for="personality">Personality</label>
                <select name="personality" id="personality" required>
                    <option value="">Select Personality</option>
                    {% for p in personality_choices %}
                        <option value="{{ p }}" {% if questionnaire and questionnaire.personality == p %}selected{% endif %}>{{ p }}</option>
                    {% endfor %}
                </select>
            </div>

            <!-- Communication Style -->
            <div class="form-group">
                <label for="communication_style">Communication Style</label>
                <select name="communication_style" id="communication_style" required>
                    <option value="">Select Communication Style</option>
                    {% for c in comm_style_choices %}
                        <option value="{{ c }}" {% if questionnaire and questionnaire.communication_style == c %}selected{% endif %}>{{ c }}</option>
                    {% endfor %}
                </select>
            </div>

            <!-- Hobbies -->
            <div class="form-group">
                <label>Hobbies (Max 5)</label>
                <div class="checkbox-group">
                    {% for hobby in hobbies_choices %}
                        <label>
                            <input type="checkbox" name="hobbies_interests" value="{{ hobby }}"
                            {% if selected_hobbies and hobby in selected_hobbies %}checked{% endif %}>
                            {{ hobby }}
                        </label>
                    {% endfor %}
                </div>
            </div>

            <!-- Year -->
            <div class="form-group">
                <label for="year">Year</label>
                <select name="year" id="year" required>
                    <option value="">Select Year</option>
                    {% for y in year_choices %}
                        <option value="{{ y }}" {% if questionnaire and questionnaire.year == y %}selected{% endif %}>{{ y }}</option>
                    {% endfor %}
                </select>
            </div>

            <!-- Relationship Status -->
            <div class="form-group">
                <label for="relationship_status">Relationship Status</label>
                <select name="relationship_status" id="relationship_status" required>
                    <option value="">Select Status</option>
                    {% for s in status_choices %}
                        <option value="{{ s }}" {% if questionnaire and questionnaire.relationship_status == s %}selected{% endif %}>{{ s }}</option>
                    {% endfor %}
                </select>
            </div>

            <!-- Looking For -->
            <div class="form-group">
                <label for="looking_for">Looking For</label>
                <select name="looking_for" id="looking_for" required>
                    <option value="">Select Option</option>
                    {% for option in looking_for_choices %}
                        <option value="{{ option }}" {% if questionnaire and questionnaire.looking_for == option %}selected{% endif %}>{{ option }}</option>
                    {% endfor %}
                </select>
            </div>

            <button type="submit">Save & Continue</button>
        </form>
    </div>
</body>
</html>
